{"version":3,"sources":["VolcanoAnalysis.es6"],"names":[],"mappings":";;AAAA,SAAS,oBAAoB,CAAC,OAAO,EAAE;AACnC,QAAM,IAAI,GAAG,OAAO,CAAC,IAAI,CAAA;AACzB,QAAM,OAAO,GAAG,OAAO,CAAC,OAAO,CAAA;AAC/B,QAAM,oBAAoB,GAAG,OAAO,CAAC,oBAAoB,CAAA;AACzD,QAAM,MAAM,GAAG,OAAO,CAAC,MAAM,CAAA;AAC7B,QAAM,UAAU,GAAG,OAAO,CAAC,UAAU,CAAA;AACrC,QAAM,YAAY,GAAG,OAAO,CAAC,YAAY,CAAA;;AAEzC,QAAI,MAAM,GAAG,oBAAoB,CAAC,GAAG,CAAC,UAAC,CAAC,EAAE,CAAC,EAAK;AAC5C,eAAO;AACH,eAAG,EAAE,IAAI,CAAC,CAAC,CAAC;AACZ,kBAAM,EAAE,OAAO,CAAC,CAAC,CAAC;AAClB,gCAAoB,EAAE,oBAAoB,CAAC,CAAC,CAAC;AAC7C,iBAAK,EAAE,MAAM,CAAC,CAAC,CAAC;SACnB,CAAA;KACJ,CAAC,CAAA;;AAEF,QAAI,YAAY,GAAG,GAAG,CAAA;AACtB,QAAI,gBAAgB,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA;;AAExC,QAAM,MAAM,GAAG,EAAC,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAC,CAAA;AAC7D,QAAM,KAAK,GAAG,IAAI,GAAG,MAAM,CAAC,IAAI,GAAG,MAAM,CAAC,KAAK,CAAA;AAC/C,QAAM,MAAM,GAAG,GAAG,GAAG,MAAM,CAAC,GAAG,GAAG,MAAM,CAAC,MAAM,CAAA;;AAE/C,QAAI,YAAY,GAAG,EAAE,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CACxD,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,CACpB,IAAI,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAA;;AAE3B,QAAI,WAAW,GAAG,EAAE,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CACpD,IAAI,CAAC,OAAO,EAAE,KAAK,GAAG,MAAM,CAAC,IAAI,GAAG,MAAM,CAAC,KAAK,CAAC,CACjD,IAAI,CAAC,QAAQ,EAAE,MAAM,GAAG,MAAM,CAAC,GAAG,GAAG,MAAM,CAAC,MAAM,CAAC,CACnD,MAAM,CAAC,GAAG,CAAC,CACX,IAAI,CAAC,WAAW,EAAE,YAAY,GAAG,MAAM,CAAC,IAAI,GAAG,GAAG,GAAG,MAAM,CAAC,GAAG,GAAG,GAAG,CAAC,CAAA;;AAE3E,QAAI,QAAQ,GAAG,EAAE,CAAC,MAAM,CAAC,kBAAkB,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CACrD,IAAI,CAAC,OAAO,EAAE,GAAG,CAAC,CAClB,IAAI,CAAC,QAAQ,EAAE,MAAM,GAAG,CAAC,CAAC,CAAA;;AAE/B,QAAI,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,MAAM,EAAE,CACpB,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,CACzC,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAA;;AAEtB,QAAI,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,MAAM,EAAE,CACpB,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,oBAAoB,CAAC,CAAC,CACvC,KAAK,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,CAAA;;AAEvB,QAAI,KAAK,GAAG,EAAE,CAAC,GAAG,CAAC,IAAI,EAAE,CACpB,KAAK,CAAC,CAAC,CAAC,CACR,MAAM,CAAC,QAAQ,CAAC,CAAA;;AAErB,QAAI,KAAK,GAAG,EAAE,CAAC,GAAG,CAAC,IAAI,EAAE,CACpB,KAAK,CAAC,CAAC,CAAC,CACR,MAAM,CAAC,MAAM,CAAC,CAAA;;AAEnB,eAAW,CAAC,MAAM,CAAC,GAAG,CAAC,CAClB,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CACrB,IAAI,CAAC,WAAW,EAAE,cAAc,GAAG,MAAM,GAAG,GAAG,CAAC,CAChD,IAAI,CAAC,KAAK,CAAC,CAAA;;AAEhB,eAAW,CAAC,MAAM,CAAC,GAAG,CAAC,CAClB,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CACrB,IAAI,CAAC,KAAK,CAAC,CAAA;;AAEhB,eAAW,CAAC,MAAM,CAAC,MAAM,CAAC,CACrB,IAAI,CAAC,OAAO,EAAE,eAAe,CAAC,CAC9B,IAAI,CAAC,GAAG,EAAE,KAAK,GAAG,CAAC,CAAC,CACpB,IAAI,CAAC,GAAG,EAAE,MAAM,GAAG,EAAE,CAAC,CACtB,IAAI,CAAC,aAAa,EAAE,QAAQ,CAAC,CAC7B,IAAI,CAAC,SAAS,CAAC,CAAA;;AAEpB,eAAW,CAAC,MAAM,CAAC,MAAM,CAAC,CACrB,IAAI,CAAC,OAAO,EAAE,eAAe,CAAC,CAC9B,IAAI,CAAC,aAAa,EAAE,QAAQ,CAAC,CAC7B,IAAI,CAAC,WAAW,EAAE,YAAY,GAAI,CAAC,EAAE,AAAC,GAAG,GAAG,GAAI,MAAM,GAAG,CAAC,AAAC,GAAG,cAAc,CAAC,CAC7E,IAAI,CAAC,WAAW,CAAC,CAAA;;AAEtB,QAAI,OAAO,GAAG,EAAE,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAChD,IAAI,CAAC,OAAO,EAAE,cAAc,CAAC,CAC7B,KAAK,CAAC,YAAY,EAAE,QAAQ,CAAC,CAAA;;AAElC,aAAS,QAAQ,GAAG;AAChB,YAAI,IAAI,GAAG,EAAE,CAAC,KAAK,CAAC,CAAC,CAAA;AACrB,YAAI,IAAI,GAAG,CAAC,EAAE;AACV,gBAAI,GAAG,CAAC,CAAA;SACX;AACD,YAAI,IAAI,GAAG,MAAM,EAAE;AACf,gBAAI,GAAG,MAAM,CAAA;SAChB;;AAED,UAAE,CAAC,SAAS,CAAC,QAAQ,CAAC,CACjB,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAChB,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA;;AAErB,UAAE,CAAC,SAAS,CAAC,UAAU,CAAC,CACnB,IAAI,CAAC,GAAG,EAAE,IAAI,GAAG,CAAC,CAAC,CAAA;;AAExB,UAAE,CAAC,SAAS,CAAC,QAAQ,CAAC,CACjB,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,CACf,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAA,CAAE,OAAO,CAAC,CAAC,CAAC,CAAC,CAAA;;AAEjE,wBAAgB,GAAG,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAA;;AAEjC,UAAE,CAAC,SAAS,CAAC,QAAQ,CAAC,CACjB,KAAK,CAAC,MAAM,EAAE,UAAA,CAAC;mBAAI,QAAQ,CAAC,CAAC,CAAC;SAAA,CAAC,CAAA;;AAEpC,wBAAgB,CAAC,kBAAkB,EAAE,CAAC,IAAI,EAAE,CAAC,CAAA;KAChD;;AAED,QAAI,KAAK,GAAG,EAAE,CAAC,QAAQ,CAAC,IAAI,EAAE,CACzB,EAAE,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAA;;AAEzB,eAAW,CAAC,MAAM,CAAC,MAAM,CAAC,CACrB,IAAI,CAAC,OAAO,EAAE,OAAO,CAAC,CACtB,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CACb,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAC/B,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,CACjB,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAAA;;AAEpC,eAAW,CAAC,MAAM,CAAC,MAAM,CAAC,CACrB,IAAI,CAAC,OAAO,EAAE,SAAS,CAAC,CACxB,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CACZ,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,gBAAgB,CAAC,GAAG,CAAC,CAAC,CAClC,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,CACpB,IAAI,CAAC,QAAQ,EAAE,EAAE,CAAC,CAClB,IAAI,CAAC,KAAK,CAAC,CAAA;;AAEhB,eAAW,CAAC,MAAM,CAAC,MAAM,CAAC,CACrB,IAAI,CAAC,OAAO,EAAE,YAAY,CAAC,CAC3B,IAAI,CAAC,GAAG,EAAE,KAAK,GAAG,CAAC,CAAC,CACpB,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,gBAAgB,CAAC,CAAC,CAC9B,IAAI,CAAC,IAAI,EAAE,QAAQ,CAAC,CACpB,IAAI,CAAC,aAAa,EAAE,OAAO,CAAC,CAC5B,IAAI,CAAC,YAAY,CAAC,CAClB,KAAK,CAAC,MAAM,EAAE,KAAK,CAAC,CAAA;;AAEzB,aAAS,UAAU,GAAG;AAClB,YAAI,IAAI,GAAG,EAAE,CAAC,KAAK,CAAC,CAAC,CAAA;;AAErB,YAAI,IAAI,GAAG,CAAC,EAAE;AACV,gBAAI,GAAG,CAAC,CAAA;SACX;AACD,YAAI,IAAI,GAAG,KAAK,EAAE;AACd,gBAAI,GAAG,KAAK,CAAA;SACf;;AAED,YAAI,KAAK,GAAG,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAA;;AAE1B,UAAE,CAAC,SAAS,CAAC,iBAAiB,CAAC,CAC1B,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAC/B,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;AACpC,UAAE,CAAC,SAAS,CAAC,mBAAmB,CAAC,CAC5B,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAA;AACvC,UAAE,CAAC,SAAS,CAAC,iBAAiB,CAAC,CAC1B,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAC9B,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAA,CAAE,OAAO,CAAC,CAAC,CAAC,CAAC,CAAA;;AAEtD,UAAE,CAAC,SAAS,CAAC,kBAAkB,CAAC,CAC3B,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAC9B,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;AACnC,UAAE,CAAC,SAAS,CAAC,oBAAoB,CAAC,CAC7B,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAA;AACtC,UAAE,CAAC,SAAS,CAAC,kBAAkB,CAAC,CAC3B,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAC7B,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAA;;AAEnD,oBAAY,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAA;;AAE9B,UAAE,CAAC,SAAS,CAAC,QAAQ,CAAC,CACjB,KAAK,CAAC,MAAM,EAAE,UAAA,CAAC;mBAAI,QAAQ,CAAC,CAAC,CAAC;SAAA,CAAC,CAAA;;AAEpC,wBAAgB,CAAC,kBAAkB,EAAE,CAAC,IAAI,EAAE,CAAC,CAAA;KAChD;;AAED,QAAI,OAAO,GAAG,EAAE,CAAC,QAAQ,CAAC,IAAI,EAAE,CAC3B,EAAE,CAAC,MAAM,EAAE,UAAU,CAAC,CAAA;;AAE3B,eAAW,CAAC,MAAM,CAAC,MAAM,CAAC,CACrB,IAAI,CAAC,OAAO,EAAE,gBAAgB,CAAC,CAC/B,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAC5B,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC,CAClB,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAC5B,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAA;;AAElB,eAAW,CAAC,MAAM,CAAC,MAAM,CAAC,CACrB,IAAI,CAAC,OAAO,EAAE,kBAAkB,CAAC,CACjC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,CAC/B,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CACZ,IAAI,CAAC,OAAO,EAAE,EAAE,CAAC,CACjB,IAAI,CAAC,QAAQ,EAAE,MAAM,CAAC,CACtB,IAAI,CAAC,OAAO,CAAC,CAAA;;AAElB,eAAW,CAAC,MAAM,CAAC,MAAM,CAAC,CACrB,IAAI,CAAC,OAAO,EAAE,qBAAqB,CAAC,CACpC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAC3B,IAAI,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CACd,IAAI,CAAC,IAAI,EAAE,QAAQ,CAAC,CACpB,IAAI,CAAC,aAAa,EAAE,KAAK,CAAC,CAC1B,IAAI,CAAC,WAAW,GAAI,CAAC,YAAY,AAAC,CAAC,CACnC,KAAK,CAAC,MAAM,EAAE,SAAS,CAAC,CAAA;;AAE7B,eAAW,CAAC,MAAM,CAAC,MAAM,CAAC,CACrB,IAAI,CAAC,OAAO,EAAE,iBAAiB,CAAC,CAChC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC,CAC3B,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC,CAClB,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC,CAC3B,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAA;;AAElB,eAAW,CAAC,MAAM,CAAC,MAAM,CAAC,CACrB,IAAI,CAAC,OAAO,EAAE,mBAAmB,CAAC,CAClC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,CAC9B,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CACZ,IAAI,CAAC,OAAO,EAAE,EAAE,CAAC,CACjB,IAAI,CAAC,QAAQ,EAAE,MAAM,CAAC,CACtB,IAAI,CAAC,OAAO,CAAC,CAAA;;AAElB,eAAW,CAAC,MAAM,CAAC,MAAM,CAAC,CACrB,IAAI,CAAC,OAAO,EAAE,sBAAsB,CAAC,CACrC,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC,CAC1B,IAAI,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CACd,IAAI,CAAC,IAAI,EAAE,QAAQ,CAAC,CACpB,IAAI,CAAC,aAAa,EAAE,OAAO,CAAC,CAC5B,IAAI,CAAC,WAAW,GAAG,YAAY,CAAC,CAChC,KAAK,CAAC,MAAM,EAAE,SAAS,CAAC,CAAA;;AAE7B,aAAS,kBAAkB,GAAG;AAC1B,eAAO,EAAE,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,UAAA,CAAC;mBAAI,CAAC,CAAC,oBAAoB,GAAG,gBAAgB,IAAI,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,YAAY;SAAA,CAAC,CAAA;KAC3H;;AAED,aAAS,QAAQ,CAAC,KAAK,EAAE;AACrB,YAAI,KAAK,CAAC,oBAAoB,GAAG,gBAAgB,IAAI,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,YAAY,EAAE;AACvF,mBAAO,SAAS,CAAA;SACnB;AACD,YAAI,KAAK,CAAC,oBAAoB,IAAI,gBAAgB,IAAI,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,YAAY,EAAE;AACxF,mBAAO,SAAS,CAAA;SACnB;AACD,YAAI,KAAK,CAAC,oBAAoB,IAAI,gBAAgB,IAAI,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,YAAY,EAAE;AACzF,mBAAO,SAAS,CAAA;SACnB;AACD,eAAO,SAAS,CAAA;KACnB;;AAED,aAAS,iBAAiB,GAAG;AACzB,UAAE,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,CAAA;KACrD;;AAED,aAAS,gBAAgB,CAAC,MAAM,EAAE;AAC9B,yBAAiB,EAAE,CAAA;AACnB,YAAI,CAAC,MAAM,CAAC,MAAM,EAAE;AAChB,mBAAM;SACT;AACD,YAAI,OAAO,GAAG,CAAC,KAAK,EAAE,OAAO,EAAE,sBAAsB,EAAE,QAAQ,CAAC,CAAA;AAChE,YAAI,MAAM,GAAG,CAAC,IAAI,EAAE,SAAS,EAAE,WAAW,EAAE,GAAG,CAAC,CAAA;AAChD,YAAI,KAAK,GAAG,EAAE,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC,MAAM,CAAC,OAAO,CAAC,CACjD,IAAI,CAAC,OAAO,EAAE,SAAS,CAAC,CAAA;AAC7B,YAAI,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,CAAA;AACjC,YAAI,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,CAAA;;AAEjC,aAAK,CAAC,MAAM,CAAC,IAAI,CAAC,CACb,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CACrB,SAAS,CAAC,IAAI,CAAC,CACf,IAAI,CAAC,MAAM,CAAC,CACZ,KAAK,EAAE,CACP,MAAM,CAAC,IAAI,CAAC,CACZ,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CACrB,IAAI,CAAC,UAAA,CAAC;mBAAI,CAAC;SAAA,CAAC,CAAA;;AAEjB,YAAI,IAAI,GAAG,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,CAC3B,IAAI,CAAC,MAAM,CAAC,CACZ,KAAK,EAAE,CACP,MAAM,CAAC,IAAI,CAAC,CACZ,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CAAA;;AAE1B,YAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAC3B,IAAI,CAAC,UAAA,GAAG;mBAAI,OAAO,CAAC,GAAG,CAAC,UAAA,MAAM,EAAI;AAC3B,uBAAO,EAAC,MAAM,EAAN,MAAM,EAAE,KAAK,EAAE,GAAG,CAAC,MAAM,CAAC,EAAC,CAAA;aACtC,CAAC;SAAA,CACL,CACA,KAAK,EAAE,CACP,MAAM,CAAC,IAAI,CAAC,CACZ,IAAI,CAAC,OAAO,EAAE,WAAW,CAAC,CAC1B,IAAI,CAAC,UAAA,CAAC;mBAAI,CAAC,CAAC,KAAK;SAAA,CAAC,CAAA;KAC1B;;AAED,aAAS,cAAc,GAAG;AACtB,YAAI,KAAK,GAAG,kBAAkB,EAAE,CAAC,IAAI,EAAE,CAAC,GAAG,CAAC,UAAA,CAAC,EAAI;AAC7C,gBAAI,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA;AAC7B,mBAAO,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAA;SACjC,CAAC,CAAA;;AAEF,SAAC,CAAC,IAAI,CAAC;AACH,eAAG,EAAE,wDAAwD;AAC7D,gBAAI,EAAE,MAAM;AACZ,mBAAO,EAAE,OAAO;AAChB,iBAAK,EAAE,KAAK;AACZ,gBAAI,EAAE;AACF,uBAAO,EAAE,2BAA2B;AACpC,2BAAW,EAAE,OAAO;AACpB,0BAAU,EAAE,cAAc;AAC1B,yBAAS,EAAE,OAAO;AAClB,2BAAW,EAAE,aAAa;AAC1B,uBAAO,EAAE,aAAa;AACtB,2BAAW,EAAE,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC;aAC/B;SACJ,CAAC,CAAC,IAAI,CAAC,UAAA,QAAQ,EAAI;AAChB,gBAAI,SAAS,GAAG,QAAQ,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAA;AAC5C,gBAAI,GAAG,qHAAmH,SAAS,gDAA6C,CAAA;AAChL,kBAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;SACnB,CAAC,CAAC,IAAI,CAAC;mBAAM,KAAK,CAAC,+DAA+D,CAAC;SAAA,CAAC,CAAA;KACxF;;AAED,aAAS,aAAa,GAAG;AACrB,YAAI,KAAK,GAAG,WAAW,CAAC,SAAS,CAAC,QAAQ,CAAC,CACtC,IAAI,CAAC,MAAM,EAAE,UAAA,CAAC;mBAAI,CAAC,CAAC,GAAG;SAAA,CAAC,CAAA;;AAE7B,aAAK,CAAC,KAAK,EAAE,CACR,MAAM,CAAC,MAAM,CAAC,CACd,IAAI,CAAC,OAAO,EAAE,UAAA,CAAC;kCAAiB,CAAC,CAAC,GAAG;SAAE,CAAC,CACxC,IAAI,CAAC,GAAG,EAAE,UAAA,CAAC;mBAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC;SAAA,CAAC,CAC9B,IAAI,CAAC,GAAG,EAAE,UAAA,CAAC;mBAAI,CAAC,CAAC,CAAC,CAAC,oBAAoB,CAAC,GAAG,CAAC;SAAA,CAAC,CAC7C,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,CAChB,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC,CACjB,KAAK,CAAC,MAAM,EAAE,UAAA,CAAC;mBAAI,QAAQ,CAAC,CAAC,CAAC;SAAA,CAAC,CAC/B,EAAE,CAAC,WAAW,EAAE,UAAA,CAAC,EAAI;AAClB,gBAAI,IAAI,YAAU,CAAC,CAAC,GAAG,sBAAiB,CAAC,CAAC,MAAM,uBAAkB,CAAC,CAAC,oBAAoB,oBAAe,CAAC,CAAC,KAAK,AAAE,CAAA;AAChH,mBAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CACb,KAAK,CAAC,YAAY,EAAE,SAAS,CAAC,CAC9B,KAAK,CAAC,MAAM,EAAE,MAAM,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CACnC,KAAK,CAAC,KAAK,EAAE,MAAM,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CAAA;SAC1C,CAAC,CACD,EAAE,CAAC,UAAU,EAAE,YAAM;AAClB,mBAAO,CAAC,KAAK,CAAC,YAAY,EAAE,QAAQ,CAAC,CAAA;SACxC,CAAC,CAAA;;AAEN,aAAK,CAAC,IAAI,EAAE,CACP,IAAI,CAAC,GAAG,EAAE,CAAC,CAAC,CACZ,MAAM,EAAE,CAAA;KAChB;;AAED,iBAAa,EAAE,CAAA;AACf,oBAAgB,CAAC,kBAAkB,EAAE,CAAC,IAAI,EAAE,CAAC,CAAA;;AAE7C,QAAI,WAAW,GAAG,GAAG,CAAA;AACrB,QAAI,YAAY,GAAG,EAAE,CAAA;AACrB,QAAI,UAAU,GAAG,cAAc,CAAC;AAC5B,gBAAQ,EAAE,QAAQ;AAClB,aAAK,EAAE,mBAAmB;AAC1B,SAAC,EAAE,CAAC;AACJ,SAAC,EAAE,CAAC;AACJ,aAAK,EAAE,WAAW;AAClB,cAAM,EAAE,YAAY;AACpB,gBAAQ,EAAE,cAAc;KAC3B,CAAC,CAAA;;AAEF,cAAU,CACL,EAAE,CAAC,WAAW,EAAE;eAAM,kBAAkB,EAAE,CAAC,KAAK,CAAC,QAAQ,EAAE,SAAS,CAAC;KAAA,CAAC,CACtE,EAAE,CAAC,UAAU,EAAE;eAAM,kBAAkB,EAAE,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC;KAAA,CAAC,CAAA;CACxE","file":"VolcanoAnalysis-compiled.js","sourcesContent":["function buildVolcanoAnalysis(results) {\n    const uids = results.uids\n    const pValues = results.pValues\n    const negativeLog10PValues = results.negativeLog10PValues\n    const logFCs = results.logFCs\n    const patientIDs = results.patientIDs\n    const zScoreMatrix = results.zScoreMatrix\n\n    let points = negativeLog10PValues.map((d, i) => {\n        return {\n            uid: uids[i],\n            pValue: pValues[i],\n            negativeLog10PValues: negativeLog10PValues[i],\n            logFC: logFCs[i]\n        }\n    })\n\n    let currentLogFC = 0.5\n    let currentNegLog10P = -Math.log10(0.05)\n\n    const margin = {top: 100, right: 100, bottom: 100, left: 100}\n    const width = 1200 - margin.left - margin.right\n    const height = 800 - margin.top - margin.bottom\n\n    let volcanotable = d3.select(\"#volcanotable\").append(\"table\")\n        .attr(\"width\", width)\n        .attr(\"height\", height)\n\n    let volcanoplot = d3.select(\"#volcanoplot\").append(\"svg\")\n        .attr(\"width\", width + margin.left + margin.right)\n        .attr(\"height\", height + margin.top + margin.bottom)\n        .append(\"g\")\n        .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\")\n\n    let controls = d3.select(\"#volcanocontrols\").append(\"svg\")\n        .attr(\"width\", 220)\n        .attr(\"height\", height * 2)\n\n    let x = d3.scale.linear()\n        .domain([-d3.max(logFCs), d3.max(logFCs)])\n        .range([0, width])\n\n    let y = d3.scale.linear()\n        .domain(d3.extent(negativeLog10PValues))\n        .range([height, 0])\n\n    let xAxis = d3.svg.axis()\n        .scale(x)\n        .orient(\"bottom\")\n\n    let yAxis = d3.svg.axis()\n        .scale(y)\n        .orient(\"left\")\n\n    volcanoplot.append(\"g\")\n        .attr(\"class\", \"axis\")\n        .attr(\"transform\", \"translate(0,\" + height + \")\")\n        .call(xAxis)\n\n    volcanoplot.append(\"g\")\n        .attr(\"class\", \"axis\")\n        .call(yAxis)\n\n    volcanoplot.append('text')\n        .attr('class', 'text axisText')\n        .attr('x', width / 2)\n        .attr('y', height + 40)\n        .attr('text-anchor', 'middle')\n        .text('log2 FC')\n\n    volcanoplot.append('text')\n        .attr('class', 'text axisText')\n        .attr('text-anchor', 'middle')\n        .attr(\"transform\", \"translate(\" + (-40) + \",\" + (height / 2) + \")rotate(-90)\")\n        .text('- log10 p')\n\n    let tooltip = d3.select('#volcanoplot').append(\"div\")\n        .attr(\"class\", \"tooltip text\")\n        .style(\"visibility\", \"hidden\")\n\n    function pDragged() {\n        let yPos = d3.event.y\n        if (yPos < 0) {\n            yPos = 0\n        }\n        if (yPos > height) {\n            yPos = height\n        }\n\n        d3.selectAll('.pLine')\n            .attr(\"y1\", yPos)\n            .attr(\"y2\", yPos)\n\n        d3.selectAll('.pHandle')\n            .attr('y', yPos - 6)\n\n        d3.selectAll('.pText')\n            .attr('y', yPos)\n            .text(\"p = \" + (1 / Math.pow(10, y.invert(yPos))).toFixed(5))\n\n        currentNegLog10P = y.invert(yPos)\n\n        d3.selectAll('.point')\n            .style('fill', d => getColor(d))\n\n        drawVolcanotable(getTopRankedPoints().data())\n    }\n\n    let pDrag = d3.behavior.drag()\n        .on(\"drag\", pDragged)\n\n    volcanoplot.append('line')\n        .attr('class', 'pLine')\n        .attr('x1', 0)\n        .attr('y1', y(currentNegLog10P))\n        .attr('x2', width)\n        .attr('y2', y(currentNegLog10P))\n\n    volcanoplot.append('rect')\n        .attr('class', 'pHandle')\n        .attr('x', 0)\n        .attr('y', y(currentNegLog10P) - 6)\n        .attr('width', width)\n        .attr('height', 12)\n        .call(pDrag)\n\n    volcanoplot.append('text')\n        .attr('class', 'text pText')\n        .attr('x', width + 5)\n        .attr('y', y(currentNegLog10P))\n        .attr('dy', '0.35em')\n        .attr(\"text-anchor\", \"start\")\n        .text('p = 0.0500')\n        .style('fill', 'red')\n\n    function lFCDragged() {\n        let xPos = d3.event.x\n\n        if (xPos < 0) {\n            xPos = 0\n        }\n        if (xPos > width) {\n            xPos = width\n        }\n\n        let logFC = x.invert(xPos)\n\n        d3.selectAll('.logFCLine.left')\n            .attr(\"x1\", x(-Math.abs(logFC)))\n            .attr(\"x2\", x(-Math.abs(logFC)))\n        d3.selectAll('.logFCHandle.left')\n            .attr(\"x\", x(-Math.abs(logFC)) - 6)\n        d3.selectAll('.logFCText.left')\n            .attr(\"x\", x(-Math.abs(logFC)))\n            .text(\"log2FC = \" + (-Math.abs(logFC)).toFixed(2))\n\n        d3.selectAll('.logFCLine.right')\n            .attr(\"x1\", x(Math.abs(logFC)))\n            .attr(\"x2\", x(Math.abs(logFC)))\n        d3.selectAll('.logFCHandle.right')\n            .attr(\"x\", x(Math.abs(logFC)) - 6)\n        d3.selectAll('.logFCText.right')\n            .attr(\"x\", x(Math.abs(logFC)))\n            .text(\"log2FC = \" + Math.abs(logFC).toFixed(2))\n\n        currentLogFC = Math.abs(logFC)\n\n        d3.selectAll('.point')\n            .style('fill', d => getColor(d))\n\n        drawVolcanotable(getTopRankedPoints().data())\n    }\n\n    let lFCDrag = d3.behavior.drag()\n        .on(\"drag\", lFCDragged)\n\n    volcanoplot.append('line')\n        .attr('class', 'left logFCLine')\n        .attr('x1', x(-currentLogFC))\n        .attr('y1', height)\n        .attr('x2', x(-currentLogFC))\n        .attr('y2', 0)\n\n    volcanoplot.append('rect')\n        .attr('class', 'left logFCHandle')\n        .attr('x', x(-currentLogFC) - 6)\n        .attr('y', 0)\n        .attr('width', 12)\n        .attr('height', height)\n        .call(lFCDrag)\n\n    volcanoplot.append('text')\n        .attr('class', 'text left logFCText')\n        .attr('x', x(-currentLogFC))\n        .attr('y', -15)\n        .attr('dy', '0.35em')\n        .attr(\"text-anchor\", \"end\")\n        .text('log2FC = ' + (-currentLogFC))\n        .style('fill', '#0000FF')\n\n    volcanoplot.append('line')\n        .attr('class', 'right logFCLine')\n        .attr('x1', x(currentLogFC))\n        .attr('y1', height)\n        .attr('x2', x(currentLogFC))\n        .attr('y2', 0)\n\n    volcanoplot.append('rect')\n        .attr('class', 'right logFCHandle')\n        .attr('x', x(currentLogFC) - 6)\n        .attr('y', 0)\n        .attr('width', 12)\n        .attr('height', height)\n        .call(lFCDrag)\n\n    volcanoplot.append('text')\n        .attr('class', 'text right logFCText')\n        .attr('x', x(currentLogFC))\n        .attr('y', -15)\n        .attr('dy', '0.35em')\n        .attr(\"text-anchor\", \"start\")\n        .text('log2FC = ' + currentLogFC)\n        .style('fill', '#0000FF')\n\n    function getTopRankedPoints() {\n        return d3.selectAll('.point').filter(d => d.negativeLog10PValues > currentNegLog10P && Math.abs(d.logFC) > currentLogFC)\n    }\n\n    function getColor(point) {\n        if (point.negativeLog10PValues < currentNegLog10P && Math.abs(point.logFC) < currentLogFC) {\n            return '#000000'\n        }\n        if (point.negativeLog10PValues >= currentNegLog10P && Math.abs(point.logFC) < currentLogFC) {\n            return '#FF0000'\n        }\n        if (point.negativeLog10PValues >= currentNegLog10P && Math.abs(point.logFC) >= currentLogFC) {\n            return '#00FF00'\n        }\n        return '#0000FF'\n    }\n\n    function resetVolcanotable() {\n        d3.select('#volcanotable').selectAll('*').remove()\n    }\n\n    function drawVolcanotable(points) {\n        resetVolcanotable()\n        if (!points.length) {\n            return\n        }\n        let columns = [\"uid\", \"logFC\", \"negativeLog10PValues\", 'pValue']\n        let HEADER = [\"ID\", \"log2 FC\", \"- log10 p\", \"p\"]\n        let table = d3.select('#volcanotable').append(\"table\")\n            .attr('class', 'mytable')\n        let thead = table.append(\"thead\")\n        let tbody = table.append(\"tbody\")\n\n        thead.append(\"tr\")\n            .attr('class', 'mytr')\n            .selectAll(\"th\")\n            .data(HEADER)\n            .enter()\n            .append(\"th\")\n            .attr('class', 'myth')\n            .text(d => d)\n\n        let rows = tbody.selectAll(\"tr\")\n            .data(points)\n            .enter()\n            .append(\"tr\")\n            .attr('class', 'mytr')\n\n        let cells = rows.selectAll(\"td\")\n            .data(row => columns.map(column => {\n                    return {column, value: row[column]}\n                })\n            )\n            .enter()\n            .append(\"td\")\n            .attr('class', 'text mytd')\n            .text(d => d.value)\n    }\n\n    function launchKEGGPWEA() {\n        let genes = getTopRankedPoints().data().map(d => {\n            let split = d.uid.split(\"--\")\n            return split[split.length - 1]\n        })\n\n        $.ajax({\n            url: 'http://biocompendium.embl.de/cgi-bin/biocompendium.cgi',\n            type: \"POST\",\n            timeout: '10000',\n            async: false,\n            data: {\n                section: 'upload_gene_lists_general',\n                primary_org: 'human',\n                background: 'whole_genome',\n                Category1: 'human',\n                gene_list_1: 'gene_list_1',\n                SubCat1: 'hgnc_symbol',\n                attachment1: genes.join(\" \")\n            }\n        }).done(response => {\n            let sessionID = response.match(/tmp_\\d+/)[0]\n            let url = `http://biocompendium.embl.de/cgi-bin/biocompendium.cgi?section=pathway&pos=0&background=whole_genome&session=${sessionID}&list=gene_list_1__1&list_size=15&org=human`\n            window.open(url)\n        }).fail(() => alert('An error occured. Maybe the external resource is unavailable.'))\n    }\n\n    function updateVolcano() {\n        let point = volcanoplot.selectAll(\".point\")\n            .data(points, d => d.uid)\n\n        point.enter()\n            .append(\"rect\")\n            .attr(\"class\", d => `point uid-${d.uid}`)\n            .attr(\"x\", d => x(d.logFC) - 2)\n            .attr(\"y\", d => y(d.negativeLog10PValues) - 2)\n            .attr(\"width\", 4)\n            .attr(\"height\", 4)\n            .style(\"fill\", d => getColor(d))\n            .on(\"mouseover\", d => {\n                let html = `ID: ${d.uid}<br/>p-value: ${d.pValue}<br/>-log10 p: ${d.negativeLog10PValues}<br/>log2FC:${d.logFC}`\n                tooltip.html(html)\n                    .style(\"visibility\", \"visible\")\n                    .style(\"left\", mouseX() + 10 + \"px\")\n                    .style(\"top\", mouseY() + 10 + \"px\")\n            })\n            .on(\"mouseout\", () => {\n                tooltip.style(\"visibility\", \"hidden\")\n            })\n\n        point.exit()\n            .attr(\"r\", 0)\n            .remove()\n    }\n\n    updateVolcano()\n    drawVolcanotable(getTopRankedPoints().data())\n\n    let buttonWidth = 200\n    let buttonHeight = 40\n    let keggButton = createD3Button({\n        location: controls,\n        label: 'Find KEGG Pathway',\n        x: 2,\n        y: 2,\n        width: buttonWidth,\n        height: buttonHeight,\n        callback: launchKEGGPWEA\n    })\n\n    keggButton\n        .on(\"mouseover\", () => getTopRankedPoints().style('stroke', '#FF0000'))\n        .on(\"mouseout\", () => getTopRankedPoints().style('stroke', null))\n}"]}