{"version":3,"sources":["smartR.es6"],"names":[],"mappings":"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","file":"smartR-compiled.js","sourcesContent":["import 'babel/polyfill'\n\nfunction createD3Button(args) {\n    let button = args.location.append('g')\n\n    let box = button.append(\"rect\")\n        .attr(\"x\", args.x)\n        .attr(\"y\", args.y)\n        .attr(\"rx\", 3)\n        .attr(\"ry\", 3)\n        .attr(\"width\", args.width)\n        .attr(\"height\", args.height)\n        .style('stroke-width', '1px')\n        .style('stroke', '#009ac9')\n        .style('fill', '#009ac9')\n        .style('cursor', 'pointer')\n        .on('mouseover', () => {\n            box\n                .transition()\n                .duration(300)\n                .style('fill', '#ffffff')\n\n            text\n                .transition()\n                .duration(300)\n                .style('fill', '#009ac9')\n        })\n        .on('mouseout', () => {\n            box\n                .transition()\n                .duration(300)\n                .style('fill', '#009ac9')\n\n            text\n                .transition()\n                .duration(300)\n                .style('fill', '#ffffff')\n        })\n        .on('click', () => args.callback())\n\n    let text = button.append('text')\n        .attr('x', args.x + args.width / 2)\n        .attr('y', args.y + args.height / 2)\n        .attr('dy', '0.35em')\n        .style('pointer-events', 'none')\n        .style(\"text-anchor\", \"middle\")\n        .style('fill', '#ffffff')\n        .style('font-size', '14px')\n        .text(args.label)\n\n    return button\n}\n\nfunction createD3Switch(args) {\n    let switcher = args.location.append('g')\n\n    let checked = args.checked\n    let color = checked ? 'green' : 'red'\n\n    let box = switcher.append(\"rect\")\n        .attr(\"x\", args.x)\n        .attr(\"y\", args.y)\n        .attr(\"rx\", 3)\n        .attr(\"ry\", 3)\n        .attr(\"width\", args.width)\n        .attr(\"height\", args.height)\n        .style('stroke-width', '1px')\n        .style('stroke', color)\n        .style('fill', color)\n        .style('cursor', 'pointer')\n        .on('click', () => {\n            if (color === 'green') {\n                box\n                    .transition()\n                    .duration(300)\n                    .style('stroke', 'red')\n                    .style('fill', 'red')\n                color = 'red'\n                checked = false\n            } else {\n                box\n                    .transition()\n                    .duration(300)\n                    .style('stroke', 'green')\n                    .style('fill', 'green')\n                color = 'green'\n                checked = true\n            }\n            text.text(checked ? args.onlabel : args.offlabel)\n            args.callback(checked)\n        })\n\n    let text = switcher.append('text')\n        .attr('x', args.x + args.width / 2)\n        .attr('y', args.y + args.height / 2)\n        .attr('dy', '0.35em')\n        .style('pointer-events', 'none')\n        .style(\"text-anchor\", \"middle\")\n        .style('fill', '#ffffff')\n        .style('font-size', '14px')\n        .text(checked ? args.onlabel : args.offlabel)\n\n    return switcher\n}\n\nfunction createD3Dropdown(args) {\n    function shrink() {\n        dropdown.selectAll('.itemBox')\n            .attr('y', args.y + args.height)\n            .style('visibility', 'hidden')\n        dropdown.selectAll('.itemText')\n            .attr('y', args.y + args.height + args.height / 2)\n            .style('visibility', 'hidden')\n        itemHovered = false\n        hovered = false\n        itemHovered = false\n    }\n    let dropdown = args.location.append('g')\n\n    let hovered = false\n    let itemHovered = false\n\n    let itemBox = dropdown.selectAll('.itemBox')\n        .data(args.items, item => item.label)\n\n    itemBox\n        .enter()\n        .append('rect')\n        .attr('class', 'itemBox')\n        .attr(\"x\", args.x)\n        .attr(\"y\", args.y + args.height)\n        .attr(\"rx\", 0)\n        .attr(\"ry\", 0)\n        .attr(\"width\", args.width)\n        .attr(\"height\", args.height)\n        .style('cursor', 'pointer')\n        .style('stroke-width', '2px')\n        .style('stroke', '#ffffff')\n        .style('fill', '#E3E3E3')\n        .style('visibility', 'hidden')\n        .on('mouseover', () => {\n            itemHovered = true\n            d3.select(this)\n                .style('fill', '#009ac9')\n        })\n        .on('mouseout', () => {\n            itemHovered = false\n            d3.select(this)\n                .style('fill', '#E3E3E3')\n            setTimeout(() => {\n                if (! hovered && ! itemHovered) {\n                    shrink()\n                }\n            }, 50)\n        })\n        .on('click', d => d.callback())\n\n    let itemText = dropdown.selectAll('.itemText')\n        .data(args.items, item => item.label)\n\n    itemText\n        .enter()\n        .append('text')\n        .attr('class', 'itemText')\n        .attr('x', args.x + args.width / 2)\n        .attr('y', args.y + args.height + args.height / 2)\n        .attr('dy', '0.35em')\n        .style('pointer-events', 'none')\n        .style(\"text-anchor\", \"middle\")\n        .style('fill', '#000000')\n        .style('font-size', '14px')\n        .style('visibility', 'hidden')\n        .text(d => d.label)\n\n    let box = dropdown.append(\"rect\")\n        .attr(\"x\", args.x)\n        .attr(\"y\", args.y)\n        .attr(\"rx\", 3)\n        .attr(\"ry\", 3)\n        .attr(\"width\", args.width)\n        .attr(\"height\", args.height)\n        .style('stroke-width', '1px')\n        .style('stroke', '#009ac9')\n        .style('fill', '#009ac9')\n        .on('mouseover', () => {\n            if (hovered) {\n                return\n            }\n            dropdown.selectAll('.itemBox')\n                .transition()\n                .duration(300)\n                .style('visibility', 'visible')\n                .attr('y', d => {\n                    let idx = args.items.findIndex(item => item.label === d.label)\n                    return 2 + args.y + (idx + 1) * args.height\n                })\n\n            dropdown.selectAll('.itemText')\n                .transition()\n                .duration(300)\n                .style('visibility', 'visible')\n                .attr('y', function(d) {\n                    let idx = args.items.findIndex(item => item.label === d.label)\n                    return 2 + args.y + (idx + 1) * args.height + args.height / 2\n                })\n\n            hovered = true\n        })\n        .on('mouseout', () => {\n            hovered = false\n            setTimeout(() => {\n                if (! hovered && ! itemHovered) {\n                    shrink()\n                }\n            }, 50)\n            setTimeout(() => { // first check is not enough if animation interrupts it\n                if (! hovered && ! itemHovered) {\n                    shrink()\n                }\n            }, 350)\n        })\n\n    let text = dropdown.append('text')\n        .attr('class', 'buttonText')\n        .attr('x', args.x + args.width / 2)\n        .attr('y', args.y + args.height / 2)\n        .attr('dy', '0.35em')\n        .style('pointer-events', 'none')\n        .style(\"text-anchor\", \"middle\")\n        .style('fill', '#ffffff')\n        .style('font-size', '14px')\n        .text(args.label)\n\n    return dropdown\n}\n\nfunction createD3Slider(args) {\n    let slider = args.location.append('g')\n\n    let lineGen = d3.svg.line()\n        .x(d => d.x)\n        .y(d => d.y)\n        .interpolate(\"linear\")\n\n    let lineData = [\n        {x: args.x, y: args.y + args.height},\n        {x: args.x, y: args.y + 0.75 * args.height},\n        {x: args.x + args.width, y: args.y + 0.75 * args.height},\n        {x: args.x + args.width, y: args.y + args.height}\n    ]\n\n    let sliderScale = d3.scale.linear()\n        .domain([args.min, args.max])\n        .range([args.x, args.x + args.width])\n\n    slider.append('path')\n        .attr('d', lineGen(lineData))\n        .style('pointer-events', 'none')\n        .style('stroke', '#009ac9')\n        .style('stroke-width', '2px')\n        .style('shape-rendering', 'crispEdges')\n        .style('fill', 'none')\n\n    slider.append('text')\n        .attr('x', args.x)\n        .attr('y', args.y + args.height + 10)\n        .attr('dy', '0.35em')\n        .style('pointer-events', 'none')\n        .style(\"text-anchor\", \"middle\")\n        .style('fill', '#000000')\n        .style('font-size', '9px')\n        .text(args.min)\n\n    slider.append('text')\n        .attr('x', args.x + args.width)\n        .attr('y', args.y + args.height + 10)\n        .attr('dy', '0.35em')\n        .style('pointer-events', 'none')\n        .style(\"text-anchor\", \"middle\")\n        .style('fill', '#000000')\n        .style('font-size', '9px')\n        .text(args.max)\n\n    slider.append('text')\n        .attr('x', args.x + args.width / 2)\n        .attr('y', args.y + args.height)\n        .attr('dy', '0.35em')\n        .style('pointer-events', 'none')\n        .style(\"text-anchor\", \"middle\")\n        .style('fill', '#000000')\n        .style('font-size', '14px')\n        .text(args.label)\n\n    let currentValue = args.init\n\n    function move() {\n        let xPos = d3.event.x\n        if (xPos < args.x) {\n            xPos = args.x\n        } else if (xPos > args.x + args.width) {\n            xPos = args.x + args.width\n        }\n\n        currentValue = Number(sliderScale.invert(xPos)).toFixed(5)\n\n        dragger\n            .attr('x', xPos - 20)\n        handle\n            .attr('cx', xPos)\n        pointer\n            .attr('x1', xPos)\n            .attr('x2', xPos)\n        value\n            .attr('x', xPos + 10)\n            .text(currentValue)\n    }\n\n    let drag = d3.behavior.drag()\n        .on(\"drag\", move)\n        .on(args.trigger, () => { args.callback(currentValue) })\n\n    let dragger = slider.append('rect')\n        .attr('x', sliderScale(args.init) - 20)\n        .attr('y', args.y)\n        .attr('width', 40)\n        .attr('height', args.height)\n        .style('opacity', 0)\n        .style('cursor', 'pointer')\n        .on('mouseover', () => {\n            handle\n                .style('fill', '#009ac9')\n            pointer\n                .style('stroke', '#009ac9')\n        })\n        .on('mouseout', () => {\n            handle\n                .style('fill', '#000000')\n            pointer\n                .style('stroke', '#000000')\n        })\n        .call(drag)\n\n    let handle = slider.append('circle')\n        .attr(\"cx\", sliderScale(args.init))\n        .attr(\"cy\", args.y + 10)\n        .attr(\"r\", 6)\n        .style('pointer-events', 'none')\n        .style('fill', '#000000')\n\n    let pointer = slider.append('line')\n        .attr('x1', sliderScale(args.init))\n        .attr('y1', args.y + 10)\n        .attr('x2', sliderScale(args.init))\n        .attr('y2', args.y + 0.75 * args.height)\n        .style('pointer-events', 'none')\n        .style('stroke', '#000000')\n        .style('stroke-width', '1px')\n\n    let value = slider.append('text')\n        .attr('x', sliderScale(args.init) + 10)\n        .attr('y', args.y + 10)\n        .attr('dy', '0.35em')\n        .style('pointer-events', 'none')\n        .style(\"text-anchor\", \"start\")\n        .style('fill', '#000000')\n        .style('font-size', '10px')\n        .text(args.init)\n\n    return slider\n}\n\nfunction mouseX() {\n    let mouseXPos = typeof d3.event.sourceEvent !== 'undefined' ? d3.event.sourceEvent.pageX : d3.event.clientX\n    return mouseXPos - $('#etrikspanel').offset().left + $('#index').parent().scrollLeft()\n}\n\nfunction mouseY() {\n    let mouseYPos = typeof d3.event.sourceEvent !== 'undefined' ? d3.event.sourceEvent.pageY : d3.event.clientY\n    return mouseYPos + $(\"#index\").parent().scrollTop() - $('#etrikspanel').offset().top\n}\n\nfunction showCohortInfo(){\n    let cohortsSummary = ''\n\n    for(let i = 1; i <= GLOBAL.NumOfSubsets; i++) {\n        let currentQuery = getQuerySummary(i)\n        if(currentQuery !== '') {\n            cohortsSummary += \"<br/>Subset \" + i + \": <br/>\"\n            cohortsSummary += currentQuery\n            cohortsSummary += \"<br/>\"\n        }\n    }\n    if (cohortsSummary === '') {\n        cohortsSummary = '<br/>WARNING: No subsets have been selected! Please go to the \"Comparison\" tab and select your subsets.'\n    }\n    $('#cohortInfo').html(cohortsSummary)\n}\nshowCohortInfo()\n\nfunction updateInputView() {\n    if (typeof updateOnView === \"function\") {\n        updateOnView()\n    }\n}\n\n$('#resultsTabPanel__etrikspanel').click(showCohortInfo)\n$('#resultsTabPanel__etrikspanel').click(updateInputView)\n\nfunction getMaxWidth(elements) {\n    const MIN_SAFE_INTEGER = -(Math.pow(2, 53) - 1)\n    let currentMax = MIN_SAFE_INTEGER\n    elements.each(() => {\n        let len = this.getBBox().width\n        if (len > currentMax) {\n            currentMax = len\n        }\n    })\n    return currentMax\n}\n\nfunction createQueryCriteriaDIV({conceptid, normalunits, setvaluemode, setvalueoperator, setvaluelowvalue, setvaluehighvalue, setvalueunits, oktousevalues, setnodetype}) {\n    return {\n        conceptid : conceptid,\n        conceptname : shortenConcept(conceptid),\n        concepttooltip : conceptid.substr(1, conceptid.length),\n        conceptlevel : '',\n        concepttablename : \"CONCEPT_DIMENSION\",\n        conceptdimcode : conceptid,\n        conceptcomment : \"\",\n        normalunits : normalunits,\n        setvaluemode : setvaluemode,\n        setvalueoperator : setvalueoperator,\n        setvaluelowvalue : setvaluelowvalue,\n        setvaluehighvalue : setvaluehighvalue,\n        setvaluehighlowselect : \"N\",\n        setvalueunits : setvalueunits,\n        oktousevalues : oktousevalues,\n        setnodetype : setnodetype,\n        visualattributes : \"LEAF,ACTIVE\",\n        applied_path : \"@\",\n        modifiedNodePath : \"undefined\",\n        modifiedNodeId : \"undefined\",\n        modifiedNodeLevel : \"undefined\"\n    }\n}\n\nfunction setCohorts({constrains, andConcat, negate, reCompute, subset=1}) {\n    if (typeof appendItemFromConceptInto !== \"function\") {\n        alert('This functionality is not available in the tranSMART version you use.')\n        return\n    }\n    if (! confirm(\"Attention! This action will have the following impact:\\n1. Your cohort selection in the 'Comparison' tab will be modified.\\n2. Your current analysis will be recomputed based on this selection.\\n\")) {\n        return\n    }\n\n    let destination = $($(\"#queryTable tr:last-of-type td\")[subset - 1]).find('div[id^=panelBoxList]').last()\n    for (let constrain of constrains) {\n        if (andConcat) {\n            destination = $($(\"#queryTable tr:last-of-type td\")[subset - 1]).find('div[id^=panelBoxList]').last()\n        }\n        appendItemFromConceptInto(destination, constrain, negate)\n    }\n    if (reCompute) {\n        runAllQueries(runAnalysis)\n    }\n}\n\nfunction shortenConcept(concept) {\n    let splits = concept.split('\\\\')\n    return splits[splits.length - 3] + '/' + splits[splits.length - 2]\n}\n\nfunction activateDragAndDrop(divName) {\n    let div = Ext.get(divName)\n    let dtgI = new Ext.dd.DropTarget(div, {ddGroup: 'makeQuery'})\n    dtgI.notifyDrop = dropOntoCategorySelection\n}\n\nfunction clearVarSelection(divName) {\n    let div = Ext.get(divName).dom\n    while (div.firstChild) {\n        div.removeChild(div.firstChild)\n    }\n}\n\nfunction getConcepts(divName) {\n    return $('#' + divName).children().toArray().map(childNode => childNode.getAttribute('conceptid'))\n}\n\nfunction addSettingsToData(data, settings) {\n    for (let element of data) {\n        if (element.name == \"settings\") {\n            let json = JSON.parse(element.value)\n            json = $.extend(json, settings)\n            element.value = JSON.stringify(json)\n            break\n        }\n    }\n    return data\n}\n\nlet conceptBoxes = []\nlet sanityCheckErrors = []\nfunction registerConceptBox(name, cohorts, type='valueicon', min=0, max=Number.MAX_SAFE_INTEGER) {\n    const concepts = getConcepts(name)\n    const check1 = containsOnly(name, type)\n    const check2 = concepts.length >= min\n    const check3 = concepts.length <= max\n    sanityCheckErrors.push(\n        !check1 ? `Concept box (${name}) contains concepts with invalid type! Valid type: ${type}` :\n            !check2 ? `Concept box (${name}) contains too few concepts! Valid range: ${min} - ${max}` :\n                !check3 ? `Concept box (${name}) contains too many concepts! Valid range: ${min} - ${max}` : '')\n    conceptBoxes.push({name, cohorts, type, concepts})\n}\n\nfunction prepareFormData() {\n    let data = []\n    data.push({name: 'conceptBoxes', value: JSON.stringify(conceptBoxes)})\n    data.push({name: 'result_instance_id1', value: GLOBAL.CurrentSubsetIDs[1]})\n    data.push({name: 'result_instance_id2', value: GLOBAL.CurrentSubsetIDs[2]})\n    data.push({name: 'script', value: $('#scriptSelect').val()})\n    data.push({name: 'settings', value: JSON.stringify(getSettings())})\n    data.push({name: 'cookieID', value: setSmartRCookie()})\n    return data\n}\n\nfunction containsOnly(divName, icon) {\n    // FIXME: the part after || is only because alphaicon does not exist in the current master branch\n    return $('#' + divName).children().toArray().every(childNode => childNode.getAttribute('setnodetype') === icon || icon === 'alphaicon');\n}\n\nfunction sane() { // FIXME: somehow check for subset2 to be non empty iff two cohorts are needed\n    if (isSubsetEmpty(1) && isSubsetEmpty(2)) {\n        alert('No cohorts have been selected. Please drag&drop cohorts to the fields within the \"Comparison\" tab')\n        return false\n    }\n\n    if ($(\"#scriptSelect\").val() === '') {\n        alert('Please select the algorithm you want to use!')\n        return false\n    }\n\n    for (let sanityCheckError of sanityCheckErrors) {\n        if (sanityCheckError !== '') {\n            alert(sanityCheckError)\n            return false\n        }\n    }\n    return customSanityCheck() // method MUST be implemented by _inFoobarAnalysis.gsp\n}\n\nfunction setSmartRCookie() {\n    let cookies = document.cookie.split('')\n    var cookie = cookies.find(cookie => cookie.split('=')[0] === 'SmartR')\n    if (cookie) return cookie.split('=')[1]\n    let id = new Date().getTime() + Math.floor((Math.random() * 9999999999) + 1000000000)\n    document.cookie = 'SmartR=' + id\n    return id\n}\n\nfunction setImage(divName, image) {\n    function _arrayBufferToBase64( buffer ) {\n        let binary = ''\n        let bytes = new Uint8Array( buffer )\n        let len = bytes.byteLength\n        for (let byte of bytes) {\n            binary += String.fromCharCode(byte)\n        }\n        return window.btoa( binary )\n    }\n\n    let img = document.createElement('img')\n    img.setAttribute('src', \"data:image/pngbase64,\" + _arrayBufferToBase64(image))\n    document.getElementById(divName).appendChild(img)\n}\n\nfunction goToEAE() {\n    $.ajax({\n        url: pageInfo.basePath + '/SmartR/goToEAEngine' ,\n        type: \"POST\",\n        timeout: '600000'\n    }).done(response => {\n        $(\"#index\").html(response)\n    }).fail(() => {\n        $(\"#index\").html(\"AJAX CALL FAILED!\")\n    })\n}\n\nfunction renderResultsInTemplate(callback, data) {\n    $.ajax({\n        url: pageInfo.basePath + '/SmartR/renderResultsInTemplate',\n        type: \"POST\",\n        timeout: 1.8e+6,\n        data: data\n    }).done(response => {\n        if (response === 'RUNNING') {\n            setTimeout(renderResultsInTemplate(callback, data), 5000)\n        } else {\n            $('#submitButton').prop('disabled', false)\n            callback()\n            $(\"#outputDIV\").html(response)\n        }\n    }).fail(() => {\n        $('#submitButton').prop('disabled', false)\n        callback()\n        $(\"#outputDIV\").html(\"Could not render results. Please contact your administrator.\")\n    })\n}\n\nfunction renderResults(callback, data) {\n    $.ajax({\n        url: pageInfo.basePath + '/SmartR/renderResults',\n        type: \"POST\",\n        timeout: 1.8e+6,\n        data: data\n    }).done(response => {\n        response = JSON.parse(response)\n        if (response.error === 'RUNNING') {\n            setTimeout(renderResults(callback, data), 5000)\n        } else if (response.error) {\n            $('#submitButton').prop('disabled', false)\n            alert(response.error)\n        } else {\n            $('#submitButton').prop('disabled', false)\n            callback(response)\n        }\n    }).fail(() => {\n        $('#submitButton').prop('disabled', false)\n        alert(\"Server does not respond. Network connection lost?\")\n    })\n}\n\nfunction computeResults(callback=()=>{}, data=prepareFormData(), init=true, redraw=true) {\n    const retCodes = {\n        1: 'An unexpected error occured while initializing environment.',\n        2: 'An unexpected error occured while accessing the database.',\n        3: 'An unexpected error occured while processing the data.'\n    }\n\n    $('#submitButton').prop('disabled', true)\n    $.ajax({\n        url: pageInfo.basePath + '/SmartR/' + (init ? 'computeResults' : 'reComputeResults'),\n        type: \"POST\",\n        timeout: 1.8e+6,\n        data: data\n    }).done(response => {\n        if (response === '0') { // successful\n            if (redraw) {\n                renderResultsInTemplate(callback, data)\n            } else {\n                renderResults(callback, data)\n            }\n        } else {\n            if (init) {\n                $(\"#outputDIV\").html('')\n            }\n            $('#submitButton').prop('disabled', false)\n            alert(retCodes[response])\n        }\n    }).fail(() => {\n        if (redraw) {\n            renderResultsInTemplate(callback, data)\n        } else {\n            renderResults(callback, data)\n        }\n    })\n}\n\nfunction showLoadingScreen() {\n    $.ajax({\n        url: pageInfo.basePath + '/SmartR/renderLoadingScreen',\n        type: \"POST\",\n        timeout: 1.8e+6\n    }).done(response => {\n        $(\"#outputDIV\").html(response)\n    }).fail(() => {\n        $(\"#outputDIV\").html(\"Loading screen could not be initialized. Probably you lost network connection.\")\n    })\n}\n\nfunction runAnalysis() {\n    conceptBoxes = []\n    sanityCheckErrors = []\n    register() // method MUST be implemented by _inFoobarAnalysis.gsp\n    if (! sane()) return false\n    // if no subset IDs exist compute them\n    if(!(isSubsetEmpty(1) || GLOBAL.CurrentSubsetIDs[1]) || !( isSubsetEmpty(2) || GLOBAL.CurrentSubsetIDs[2])) {\n        runAllQueries(runAnalysis)\n        return false\n    }\n    showLoadingScreen()\n    computeResults()\n}\n\nfunction changeInputDIV() {\n    $(\"#outputDIV\").html(\"\")\n    $.ajax({\n        url: pageInfo.basePath + '/SmartR/renderInputDIV',\n        type: \"POST\",\n        timeout: 1.8e+6,\n        data: {'script': $('#scriptSelect').val()}\n    }).done(response => {\n        $(\"#inputDIV\").html(response)\n        updateInputView()\n    }).fail(() => {\n        $(\"#inputDIV\").html(\"Coult not render input form. Probably you lost network connection.\")\n    })\n}\n\nfunction contact() {\n    const version = 0.5\n    alert(`\nBefore reporting a bug...\n... 1. Make sure you use the lastet SmartR version (installed version: ${version})\n... 2. Make sure that all requirements for using SmartR are met\n\nAll relevant information can be found on https://github.com/sherzinger/SmartR\n\nIf you still want to report a bug you MUST include these information:\n\n>>>${navigator.userAgent} SmartR/${version}<<<\n\nBug reports -> http://usersupport.etriks.org/\nFeedback -> sascha.herzinger@uni.lu`)\n}\n"]}